(**********************************************************************************************************
 * Application Code (Type 4 code)
 **********************************************************************************************************)
 
(* This structure is populated with developer-written code *)
structure Client =
struct

  val value = Ref(Char.chr 0)

  fun initialise() = ();
  
  fun timeTriggered() =
      (API.sb_write_port_write(String.implode[!value]);
       API.logInfo "---------------------------------------\n";
       API.logInfo(String.concat ["[src] Sent ",Int.toString(Char.ord(!value)),"\n"]);
       value := Char.chr(Int.mod (Char.ord(!value) + 1) 128)
      );

  (* ===========================================================*
   * The methods below are not currently used in HAMR/Slang     *
   * ===========================================================*)

  fun activate() = ();

  fun deactivate() = ();

  fun finalise() = ();

  fun recover() = ();
end;
